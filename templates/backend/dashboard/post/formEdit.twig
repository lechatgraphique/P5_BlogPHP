{% extends 'backend/layouts/default.twig' %}

{% block title %}
    <title>Blog PHP : Liste des articles</title>
{% endblock %}

{% block content %}

    <div class="container-fluid mt-5 pt-5">
        <div class="row">
            <div class="col-md-2">
                {% include 'backend/layouts/adminNavbar.twig' %}
            </div>
            <div class="col-md-10">
                {% include 'backend/layouts/alert.twig' %}
                <div class="card">
                    <div class="card-header">
                        Liste des articles
                    </div>
                    <form action="/dashboard/articles/update/" method="post"  enctype="multipart/form-data">
                        <input type="hidden" class="form-control" id="id" name='id' value="{{ post.id }}">
                        <div class="card-body">
                            <section class=" mt-5">
                                <div class="row">
                                    <div class="col-md-5 col-sm-12">
                                        <img src="/uploads/posts/{{ post.image }}" alt="..." class="img-thumbnail img-crop-thumb">
                                        <div class="form-group mt-3">
                                            <label>Image</label>
                                            <div class="custom-file">
                                                <input type="file" class="custom-file-input" id="imagePost" name="image_post">
                                                <label class="custom-file-label" for="imagePost">Sélectionner un fichier</label>
                                                <input type="hidden" name="MAX_FILE_SIZE" value="100000">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>Catégories</label>
                                            <select class="custom-select" name="category_id">
                                                {% for category in categories %}
                                                <option value="{{ category.id }}" {% if category.id == post.categoryId %} selected {% endif %}>
                                                    {{ category.title }}
                                                </option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <p>
                                            Crée par : <b>{{ post.author.firstName }} {{ post.author.lastName }}</b>
                                            <br><br>
                                            Posté le : <b>{{ post.createdAt | dateFR }}</b>
                                            <br>
                                            Mise à jour le : <b>{% if post.updatedAt %} {{ post.updatedAt | dateFR }} {% endif %}</b>
                                        </p>
                                    </div>
                                    <div class="col-md-7 col-sm-12">
                                        <div class="form-group">
                                            <label for="title">Titre de l'article</label>
                                            <input type="text" class="form-control" id="title" name='title' value="{{ post.title }}" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="title">Slug</label>
                                            <input type="text" class="form-control" id="title" name='slug' value="{{ post.slug }}" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="chapo">Introduction</label>
                                            <textarea class="form-control" id="chapo" name='description' rows="2" required>{{ post.description }}</textarea>
                                        </div>
                                        <div class="form-group">
                                            <label for="content">Contenu de l'article</label>
                                            <textarea class="form-control" id="content" rows="10" name="content" required>{{ post.content }}</textarea>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                        <div class="card-footer text-muted">
                            <div class="d-flex justify-content-between">
                                <a class="btn btn-danger" href="/dashboard/articles/{{ post.slug }}-{{ post.id }}/delete" role="button">Supprimer</a>
                                <button type="submit" class="btn btn-success mr-2">Créer</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endblock %}